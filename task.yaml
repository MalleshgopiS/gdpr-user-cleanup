name: gdpr-user-cleanup
difficulty: hard
category: databases
description: |
  The "Bleater" platform is failing GDPR audits. When a user is deleted, "ghost data" remains across the architecture.

  Requirements for USER_ID 'user123':
  1. Delete Auth-DB record (PostgreSQL: auth-db).
  2. Anonymize Posts (PostgreSQL: bleat-db): Change author_id to 'deleted_user' and redact PII content (replace user ID with '[REDACTED]').
  3. Delete Profile document (MongoDB: mongo).
  4. Delete Session key (Redis: redis).
  5. Delete Avatar object (MinIO: http://minio:9000).
  6. **Ensure the script is idempotent (must be able to run multiple times without error).**

  Database Details:
  - Auth DB: db `auth_db`, table `users(id, email)`
  - Bleat DB: db `bleat_db`, table `posts(author_id, content)`
  - MongoDB: db `bleater`, collection `profiles`
  - Redis: key `session:<USER_ID>`
  - MinIO: bucket `avatars`, object `<USER_ID>.png`, credentials `minioadmin` / `minioadmin`